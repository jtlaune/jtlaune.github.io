<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="preload" as="font" type="font/woff2" href="/_astro/spectral-latin-400-normal.CTVgUekv.woff2" crossorigin="anonymous"><link rel="sitemap" href="/sitemap-index.xml"><link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20100%20100%22%3E%3Ctext%20y%3D%22.9em%22%20font-size%3D%2290%22%3E%E2%98%84%EF%B8%8F%3C%2Ftext%3E%3C%2Fsvg%3E"><link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20100%20100%22%3E%3Ctext%20y%3D%22.9em%22%20font-size%3D%2290%22%3E%E2%98%84%EF%B8%8F%3C%2Ftext%3E%3C%2Fsvg%3E"><title>JT Laune — Data Scientist</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="generator" content="Astro v5.15.9"><meta name="description" content="Portfolio website for JT (Jordan) Laune"><meta name="keywords"><meta name="generator" content="Astro v5.15.9"><meta name="robots" content="noindex, nofollow"><!-- OpenGraph Meta --><meta property="og:type" content="website"><meta property="og:site_name" content="JT Laune — Data Scientist"><meta property="og:title" content="JT Laune — Data Scientist"><meta property="og:description" content="Portfolio website for JT (Jordan) Laune"><meta property="og:image" content="https://jtlaune.github.io/_astro/meta-default.Biq20jLw_1kwTcX.jpg"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="720"><!-- Twitter Meta --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:creator" content="@jtlaune"><meta property="twitter:site" content="@jtlaune"><meta property="twitter:title" content="JT Laune — Data Scientist"><meta property="twitter:description" content="Portfolio website for JT (Jordan) Laune"><meta property="twitter:image" content="https://jtlaune.github.io/_astro/meta-default.Biq20jLw_1kwTcX.jpg"><script>
    // Prevent FOUC by applying theme before page renders
    (function() {
      const theme = localStorage.getItem('theme') || 
        (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
      }
    })();
  </script><link rel="stylesheet" href="/_astro/index.C04VaA4W.css"></head><body class="bg-background text-foreground pb-12 font-serif"> <header class="max-w-[50rem] mx-auto px-4 w-full max-w-full flex justify-center items-center"> <div class="w-max fixed top-0 mt-5 bg-muted-foreground/40 backdrop-blur-3xl border border-border rounded-full p-1"><nav class="flex items-center"><ul class="flex items-center gap-1"><li><a href="/" class="font-medium transition-colors block px-5 py-2 hover:text-headings">Home</a></li><li><a href="/writing" class="font-medium transition-colors block px-5 py-2 hover:text-headings text-headings bg-muted-foreground/40 rounded-full">Writing</a></li></ul></nav></div> </header> <main class="pt-24">  <section class="max-w-[50rem] mx-auto px-4">  <article class="flex flex-col gap-6"> <div class="flex flex-col gap-2"> <a href="/writing" class="transition-all text-muted-foreground hover:text-foreground pb-4 text-sm w-max">
Back to writing
</a> <div class="flex flex-col gap-1.5"> <div class="relative rounded-full shrink-0 overflow-hidden w-12 h-12"> <img src="/_astro/avatar.DDLjuP6f_ZdbHdw.avif" loading="eager" alt="JT Laune, PhD" decoding="async" fetchpriority="auto" width="52" height="52" class="object-cover"> </div> <span class="text-foreground">JT Laune, PhD</span> </div> <h1 class="text-3xl font-semibold text-headings">Wikilacra</h1> </div> <figure class="flex flex-col gap-1"> <div class="relative aspect-video overflow-hidden rounded-lg"> <img src="/_astro/Real_apple_and_fake_apple.DtG9qL7E_EFaMi.webp" alt="Wikilacra" loading="lazy" decoding="async" fetchpriority="auto" width="1024" height="621" class="object-cover"> </div> <figcaption class="text-right text-xs text-muted-foreground [&_p]:m-0 [&_a]:underline"><p>By Arbitrarily0 - Own work, <a href="https://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=25913848">Wikimedia Commons</a>.</p></figcaption> </figure> <div class="prose dark:prose-invert"> <p>What can we tell about what&#39;s going on out in <em>reality</em> based upon its
reflection in the world&#39;s most up-to-date encyclopedia? I built an end-to-end
machine learning project, <a href="/wikilacra">Wikilacra</a>, that listens to Wikipedia&#39;s
edit stream and predicts which pages are being edited in response to
contemporaneous events.</p>
<p>You can see the code on my GitHub <a href="https://github.com/jtlaune/Wikilacra">here</a>.
I utilized DVC and git for data and code versioning, MLflow for model
training, experiment tracking, and deployment, and Docker for
containerization. For tracking the server-side event edit stream, I set up a
local SQL database and deployed the project to AWS.
I&#39;ll detail the dataset and models below.
An &quot;event&quot; refers to something that is happening currently, like a storm, a death, or a sporting event.
A &quot;non-event&quot; is all other editing behavior, like adding details to an article about a historical person, reorganizing and copyediting an article, or even vandalism.</p>
<h1 id="training-data">Training Data</h1>
<p>Wikipedia releases
<a href="https://dumps.wikimedia.org/other/mediawiki_history/readme.html">dumps</a> of its
analytics history on a monthly basis.
This was a great choice for my purposes, because the data was already built into structured CSV files and I didn&#39;t have to make an enormous month-long call to Wikipedia&#39;s server-side events (SSE) architecture.
But it gave me a major <a href="#issues">headache later on</a>!</p>
<p>I needed a reasonable number (500-1500) of events to label by hand that would likely have relatively balanced proportions of events/non-events.
I used the August 2025 dump from the same month and binned the edit counts into discrete hourly timestamps.
I selected pages with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo lspace="0em" rspace="0em">≥</mo><mn>15</mn></mrow><annotation encoding="application/x-tex">{\geq}15</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord"><span class="mrel">≥</span></span><span class="mord">15</span></span></span></span> edits in an hour from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo lspace="0em" rspace="0em">≥</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">{\geq}2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em"></span><span class="mord"><span class="mrel">≥</span></span><span class="mord">2</span></span></span></span> users.
This gave me about 1100 events with a fairly even split between events and non-events.</p>
<h1 id="modeling">Modeling</h1>
<p>The data are time-series, and so lookforward bias was a concern.
But I found that treating each page candidate event as independent didn&#39;t degrade cross-validation (CV) or test set performance, and so using only historical data from that page was enough to prevent lookforward.
This implies that the background editing activity did not play too much of a role in prediction.</p>
<p>This is a classification problem with quantitative and categorical data with only a fair amount of labeled data points.
I started with random forests (RF, <code>scikit-learn</code>), linear/non-linear support vector classifiers (SVCs, <code>scikit-learn</code>), and gradient-boosted trees (GBT, <code>xgboost</code>).
Then I tried a neural net (NN, <code>pytorch</code>).
For the methods that required normalization (SVCs and NNs), I used <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>log</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span></span></span></span> normalization on counts and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>tanh</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\tanh</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mop">tanh</span></span></span></span> normalization on slopes.</p>
<p>I performed grid search K-fold CV on each method and selected the best performing model in accuracy for each algorithm.
I didn&#39;t use time-series CV since I am treating each candidate event as independent.
The metrics I tested on also included the F1 score, precision, recall, and false positive rate, but I chose accuracy since the classes are balanced and I care equally about false negatives and positives.</p>
<p>Most of the models ended up around 85% accuracy, and so I went with the random forest for its simplicity and fast training time, and because it gives feature importances.
The best hyperparameters were deep trees (<code>max_depth=9</code>) with only 100 estimators.
I was happy with this performance—I had a relatively small training set, and the class definitions are <a href="#issues">slightly ambiguous</a> anyways.</p>
<p>Unsurprisingly, the most important feature is if the title of the page has the current year in the title.
The second most important feature was the 6-hour rolling mean of the user entropy.
The user entropy is calculated per hour via</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>(user entropy)</mtext><mi>h</mi></msub><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>p</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\text{(user entropy)}_h = \sum_{i} p_i\log p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em"></span><span class="mord"><span class="mord text"><span class="mord">(user entropy)</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em"><span style="top:-2.4003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em"><span style="top:-1.8723em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>
<p>where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">h</span></span></span></span> denotes the current hour, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub><mo>=</mo><msub><mi>n</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">p_i=n_i/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">n_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> is the number of edits made by user <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span> in hour <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">h</span></span></span></span>, and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span> is the total number of edits the page received in hour <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">h</span></span></span></span>.
I.e., <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">p_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> is the proportion of edits made by user <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em"></span><span class="mord mathnormal">i</span></span></span></span> in that hour.
The user entropy is high whenever edits are evenly distributed among the editors—for newsworthy events, it makes sense that entropy would be high, as many editors are making many edits simultaneously.</p>
<h1 id="deployment">Deployment</h1>
<p>I deployed to an AWS EC2 instance.
I used Docker compose to deploy the always-on listening daemon and MLflow server, and the classifier that runs once per hour, which I orchestrated with <code>cron</code>.
The classifier service spits out its classifications into a JSON file.</p>
<p>I build my website using <a href="https://astro.build/">Astro</a> and host the static site on GitHub pages, which posed a problem for a dynamic web app like Wikilacra.
To solve this, I had ChatGPT vibe-code me a front end in JavaScript/HTML that reads data from the algorithm&#39;s JSON output, which I could then drop in as a page in the project.
Then, I just rebuild the website (which is very fast, thanks to Astro) and push to the pages repository.</p>
<h1 id="issues">Issues</h1>
<ol>
<li>
<p><em>Ambiguous labels</em><br/>
&quot;In response to a real event&quot; is a fairly vague specification, and this made both labeling and prediction challenging.
Even though I specified concrete rules about timeframes regarding event classification, there were some that did not fit neatly into the box.
For example, take the pages for sports seasons. Is the months-long season itself an event? Or only the games?
In this specific instance, I chose the season itself to count as the event, but in future projects, I&#39;d stick to a more well-defined response variable.</p>
</li>
<li>
<p><em>Training set</em><br/>
The training data came from monthly Wikipedia data dumps (<a href="#training-data">Training Data</a>).
The monthly dumps saved me a lot of time at the beginning of the project and enabled me to access a relatively long interval of data.
But the live SSE data stream has a different structure.
As I started to build the live part of the project, I realized I had built up a large technical debt by making these choices.
Using different data structures between training and predicting ended up being a headache and delayed the project, and in the future I&#39;ll look forward to the production data set from the very beginning of a project.</p>
</li>
</ol>
<h1 id="whats-next">What&#39;s next?</h1>
<p>During the ML development process, I experimented with adding NLP capabilities via a pre-trained LLM.
I did this by training various configurations of BERT classifiers on the page titles and revision text comments of the candidate events, and stacking this output into the tree/SVC/NN classifiers.
From my initial testing, this did not improve model performance by much, so finding a way to combine NLP/LLM with the other models would be great.</p> </div> </article>  </section>  </main> <footer class="max-w-[50rem] mx-auto px-4 pt-24"> <p class="text-center text-muted-foreground text-sm">
&copy; 2025. Powered by <a href="https://astro.build" target="_blank" rel="noopener noreferrer">Astro</a> and <a href="https://astro.build/themes/details/cvfolio/" target="_blank" rel="noopener noreferrer">CVfolio</a>.
</p> </footer> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1w9PWI" component-url="/_astro/SwitchTheme.FMe4_7CM.js" component-export="default" renderer-url="/_astro/client.DYenxVLn.js" props="{}" ssr client="only" opts="{&quot;name&quot;:&quot;SwitchTheme&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> </body></html>